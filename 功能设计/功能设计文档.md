# PKU.MLeague赛事管理系统功能设计文档

## 一、背景介绍

PKU M.League是仿照日本M.League举办的北京大学校内立直麻将联赛。赛事形式为团队赛，现有9支队伍，每支队伍由4名选手组成。赛事周期为一学年，分常规赛（9支队伍，每队24场比赛）、半决赛（6支队伍，每队20场比赛）、决赛（4支队伍，每队16场比赛）三阶段。

## 二、系统目标

为PKU M.League赛事提供全流程数字化管理，支持以下核心功能：

1. **赛程管理**：赛事管理员维护赛程、队长管理拟出战选手名单。

2. **比赛结果录入**：比赛结束后快速录入比赛结果，自动更新统计数据。

3. **积分表维护**：实时更新可视化的积分表（队伍与个人）。

## 三、用户角色与权限

1. **访客**：查看所有公开数据（赛程、积分表、对局结果）。

2. **战队队长**：管理拟出战选手名单。

3. **管理员**：全权限，包括发布赛程、录入比赛结果、修正数据。

## 四、核心功能模块

### 1. 赛程管理

- **赛程发布**

  - 比赛每一阶段开始前，由管理员预先安排好赛程。

  - 每场比赛时间初始为TBD，管理员可动态决定或修改比赛时间。

  - 发布的赛程对访客可见。

- **出战名单**

  - 比赛开始前，由队长（或管理员）填写或更改拟出战队员。

### 2. 比赛结果录入

- 管理员录入一半庄比赛结束时选手的最终点数。

- 自动计算该选手该半庄的顺位点、素点。经管理员确认后，更新比赛数据库。

### 3. 数据展示

- **历史对局**：访客可查看查看历史比赛结果。

- **积分看板**：由比赛数据，生成团队与个人积分顺位表（对访客可见）。

  - **团队积分表**：包含顺位、队伍名、积分、持越、差、晋级线差、比赛数、顺位计数等信息。

  - **个人积分表**：包含顺位、所属队伍、选手ID、积分、比赛数、平均顺位、顺位计数、最高分等信息。
